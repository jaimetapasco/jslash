<html>
<head>
<title>Draw Image</title>
<script type="text/javascript" src="../src/require.js" ></script>
<script type="text/javascript">
requireRoot("../src/");
var modules = [ "jslash", "misc" ];
modules.forEach( function(m) {
  require(m);
});

var imgs = [ "../img/all_3.jpg" ];
imgs.forEach( function(s) {
  new Image().src = s;
});

var main,subrectChange;

(function() {
  var canvas,img,s,noSubRect = true;
  main = function() {
    canvas = new core.Canvas('canvas');
    img = new Image();
    img.src = '../img/all_3.jpg';
    s = new core.Sprite(img);
    s.putOnRects = true;
    jslash.onrefresh = function() {
      canvas.draw(s);
    };
    jslash.fps = 5;
    jslash.start(canvas);
  };
  subrectChange = function() {
    if (noSubRect) {
      s.imageRect(new core.Rectangle(0,0,66,66));
      s.canvasRect(new core.Rectangle(0,0,66,66)); 
      noSubRect = false;
    }
    else {
      var r = s.imageRect();
      r.x += 66;
      console.log(r.x);
      if ( r.x + r.width >= canvas.width) {
        r.x = 0;
        r.y += 66;
      }
      s.imageRect(r);
    }
    console.log(misc.propertiesAsObject(s.imageRect()));
  };
})();

</script>
</head>
<body onload="main();"> 
<center>
<canvas id="canvas" width="600" height="400" ></canvas>
</center>

<button onclick="jslash.stop();" >STOP</button>
<button onclick="subrectChange();">Change Subrect</button>
</body>
</html>
